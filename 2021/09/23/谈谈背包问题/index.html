<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        Hexo
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            谈谈背包问题
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h4 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h4><p>有一类经典的问题，是背包问题。其实背包问题是动态规划的一种类型题目，但是可以发现这些问题具有像是的递推式子。</p>
<p>在思考这些问题的时候，其实可以用DFS的思路来进行联想求解。</p>
<h4 id="0-1背包问题"><a href="#0-1背包问题" class="headerlink" title="0-1背包问题"></a>0-1背包问题</h4><p>0-1背包问题的具体描述如下：</p>
<p><code>有N件物品和一个容量是V 的背包。每件物品有且只有一件。第i件物品的体积是 v[i]，价值是w[i] 。求解怎么使得总体积不超过背包体积且价值最大</code></p>
<p>我们考虑这个经典的背包问题在做什么事情？</p>
<p>我们可以看到，每一件物品只有一件，在面对这个物品的时候，我们有两个选择，一个选择是放入背包，一个选择是不放入背包。因为有N件物品，所以我们可以做N次选择；而同时我们也要看到，每次选择会改变两个量，一个是 <strong>价值</strong>，还有一个是 <strong>容量</strong>。</p>
<p>这种做选择的问题，很容易就想到DFS。比如我们有N次选择，那么就像我们DFS一共有N层，而每层的结果继续向前推进，那么就可以得到任意一种情况的结果，最终从其中挑出一个最佳的。</p>
<p>但是对于背包问题，我们希望能够利用上以前的结果，因为以前的结果和以后的结果是直接相关的。但这不妨碍我们继续用DFS来指导我们列出动态规划的递推式。</p>
<p>比如对于这个问题，如果要你写DFS函数的话，你会向DFS函数里面传入什么参数呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> depth,<span class="keyword">int</span> currentTotalvalue,<span class="keyword">int</span> currentCapacity)</span></span></span><br></pre></td></tr></table></figure>

<p>可以看到，我们想要传入 <strong>当前在选择第几个物品，当前物品的总价格，当前剩余的总容量。</strong></p>
<p>并且我们可以看到，上面的三个量，其实就是在一次选择的前后进行传递的。<strong>即，一个决定，其效果在进行传递，这就是传递函数的来源。</strong></p>
<p>因为选择第几个物品是+1 +1 +1 这样变化的，因此我们将其确定为传递函数的一个变量。同时，目标是求解物品的最大总价值，我们就将当前物品的总价格确定为传递函数的值，而另一个随着第i次决定变化的 <strong>剩余总容量，我们就作为转移函数的另外一维。</strong></p>
<p>我们可以列写这样的式子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j]=Math.max(dp[i-<span class="number">1</span>][j],dp[i-<span class="number">1</span>][j-w[i]]+v[i])</span><br></pre></td></tr></table></figure>

<p>上面的式子可以这样理解：</p>
<p>在第i层的时候，其值是由第i-1层决定的。第i-1层有两种可能，一种是选择了物品i，一种是没有选择物品i，而两种不同的选择对应max里的两个值。</p>
<p>得到递推式子也不过是千里第一步。继续我们解决dp问题的流程：</p>
<ol>
<li><p>初始化</p>
<p>​    初始化所有的dp的值都是0.</p>
</li>
</ol>
<p>​    2.列写表格，看看递推的情况：</p>
<p><img src="https://gitee.com/SlowSail/blogIMg/raw/master//img/tmp82F6.png" alt="tmp82F6"></p>
<p>所以i要大于等于1，j要大于等于w[i]。我们看到，由于有初始的0，所以只要i&gt;=1，j大于等于w[i]。</p>
<p>3.进一步优化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[i][j]=Math.max(dp[i-<span class="number">1</span>][j],dp[i-<span class="number">1</span>][j-w[i]]+v[i])</span><br></pre></td></tr></table></figure>

<p>可以看到，第i层的结果总是依赖于第i-1层，因此是否可以将i这个维度省略，改成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[j]=Math.max(dp[j],dp[j-w[i]]+v[i])</span><br></pre></td></tr></table></figure>

<p>不过这个式子有要注意一个问题，就是</p>
<h4 id="279-完全平方数"><a href="#279-完全平方数" class="headerlink" title="279. 完全平方数"></a><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/perfect-squares/">279. 完全平方数</a></h4><p>这道题其实就是一个背包问题。</p>
<p>首先确定我们是否有每次在选择</p>

    </div>

    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>-<a class="flink" target="_blank" rel="noopener" href="https://github.com/sanjinhub/hexo-theme-geek">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="white">
<input type="hidden" id="valine_appid" value="CmCti21ooOOIzFOhEyFkFvR0-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="FqiyUqbg7McKN2eG0MCewupf">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>